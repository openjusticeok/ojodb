<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Identifying Specific Charges • ojodb</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Identifying Specific Charges">
<meta property="og:description" content="ojodb">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ojodb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/doc-data.html">DOC Data</a>
    </li>
    <li>
      <a href="../articles/getting-started.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/identifying-charges.html">Identifying Specific Charges</a>
    </li>
    <li>
      <a href="../articles/ojo-database.html">Overview of the OJO database</a>
    </li>
    <li>
      <a href="../articles/oscn-tables.html">Overview of OSCN data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="identifying-charges_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Identifying Specific Charges</h1>
            
      
      
      <div class="hidden name"><code>identifying-charges.Rmd</code></div>

    </div>

    
    
<p>Many of the questions we ask require us to focus on specific criminal charges (<em>e.g</em>., <a href="https://okpolicy.org/in-its-first-year-sq-780-reversed-10-years-of-growth-in-felony-filings/">drug possession</a> or burglary) or civil issues (<em>e.g.</em>, <a href="https://openjustice.okpolicy.org/blog/oklahoma-court-tracker/">evictions</a>). Because the data we collect is not always clean or entered uniformly, identifying cases requires some patience and diligence. This document provides a process to do that.</p>
<div id="identifying-criminal-charges" class="section level2">
<h2 class="hasAnchor">
<a href="#identifying-criminal-charges" class="anchor"></a>Identifying criminal charges</h2>
<p>Let’s say we want to look at cases with a top charge of second degree burglary that were filed in 2018. We’ll start by querying all of the criminal felony cases for that year:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="../reference/connect_ojo.html">connect_ojo</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ojo_tbl.html">ojo_tbl</a></span><span class="op">(</span><span class="st">"ojo_crim_cases"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">casetype</span> <span class="op">==</span> <span class="st">"CF"</span>,
         <span class="va">file_year</span> <span class="op">==</span> <span class="fl">2018</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">collect</span><span class="op">(</span><span class="op">)</span>

<span class="fu">disconnect_ojo</span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; [1] TRUE</span></pre></div>
<p>This gives us 36,561 cases. The ojo_crim_cases table is a summary of all the charges and dispositions in a case. A criminal case is defined as all of the charges filed against a specific <em>person</em> in a specific court on a specific date, so each case has a unique combination of the variables <code>court</code>, <code>defname</code>, and <code>file_date</code>.</p>
<p>The <code>top_ct_desc</code> variable contains a description of the top count associated with the case. Ideally, we would have a systematic way to standardize charges from their dirty, hand-entered form; connect them to their statutory definitions; and rank them in terms of severity by finding the maximum sentence for each charge. But we have not developed that system yet, so the <code>top_ct_desc</code> is simply the first count description that appears on the case record.</p>
<p>We’ll use the <code>top_ct_desc</code> variable to find the second degree burglary cases we’re interested in.</p>
<div id="start-broad-then-narrow-down" class="section level3">
<h3 class="hasAnchor">
<a href="#start-broad-then-narrow-down" class="anchor"></a>Start broad, then narrow down</h3>
<p>To identify burglary charges, we’ll use the <code>str_detect()</code> function on the <code>top_ct_desc</code> variable to look for certain words or parts of words and exclude other words using <code>!str_detect()</code>. This code creates a new variable, <code>burg2</code>, which tells us whether or not the <code>top_ct_desc</code> variable contains the string “BURGLARY”.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="va">d</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>burg2 <span class="op">=</span> <span class="fu">str_detect</span><span class="op">(</span><span class="va">top_ct_desc</span>, <span class="st">"BURGLARY"</span><span class="op">)</span><span class="op">)</span></pre></div>
<p>We can then look at all of the charges that were caught as burglary and count the number of occurrences like this:</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">d</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">burg2</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># Look just at the charges that fit our criteria</span>
  <span class="fu">count</span><span class="op">(</span><span class="va">top_ct_desc</span><span class="op">)</span> <span class="op">%&gt;%</span>    <span class="co"># Count the frequency of each unique value of top_ct_desc</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>          <span class="co"># Sort them in descending order of frequency (n)</span>
<span class="co">#&gt; # A tibble: 211 x 2</span>
<span class="co">#&gt;    top_ct_desc                               n</span>
<span class="co">#&gt;    &lt;chr&gt;                                 &lt;int&gt;</span>
<span class="co">#&gt;  1 BURGLARY - SECOND DEGREE                890</span>
<span class="co">#&gt;  2 BURGLARY IN THE SECOND DEGREE           528</span>
<span class="co">#&gt;  3 BURGLARY - FIRST DEGREE                 281</span>
<span class="co">#&gt;  4 BURGLARY, SECOND DEGREE                 151</span>
<span class="co">#&gt;  5 BURGLARY IN THE FIRST DEGREE            107</span>
<span class="co">#&gt;  6 BURGLARY-SECOND DEGREE (FELONY)         101</span>
<span class="co">#&gt;  7 BURGLARY - SECOND DEGREE (AUTOMOBILE)    61</span>
<span class="co">#&gt;  8 BURGLARY OF AUTOMOBILE                   58</span>
<span class="co">#&gt;  9 BURGLARY-1ST DEGREE                      58</span>
<span class="co">#&gt; 10 BURGLARY 2ND DEGREE                      50</span>
<span class="co">#&gt; # … with 201 more rows</span></pre></div>
<p>There are 211 different ways that top charges of burglary were recorded in 2018, which gives a sense of how difficult this data is to standardize. To look at the full list, you can add <code>%&gt;% view()</code> at the end of code above.</p>
<p>Since we simply searched for “BURGLARY”, the <code>burg2</code> variable does not tell us whether the charge is first, second, or third degree. We see from the above list that “SECOND” and “2ND” both denote second degree burglary, so we’ll narrow to just those charges by including another <code>str_detect()</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">d</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>burg2 <span class="op">=</span> <span class="fu">str_detect</span><span class="op">(</span><span class="va">top_ct_desc</span>, <span class="st">"BURGLARY"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu">str_detect</span><span class="op">(</span><span class="va">top_ct_desc</span>, <span class="st">"SECOND|2ND"</span><span class="op">)</span><span class="op">)</span></pre></div>
<p>Then we can check our list again:</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="va">counts</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">burg2</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">count</span><span class="op">(</span><span class="va">top_ct_desc</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">counts</span><span class="op">$</span><span class="va">n</span><span class="op">)</span>
<span class="co">#&gt; [1] 2297</span></pre></div>
<p>This gives us 2,297 second degree burglary cases. Looking through the charges that were classified as second degree burglary, it looks like this definition holds up. But since there are typos, misspellings, and abbreviations in charge descriptions sometimes, we want to try pieces of words as well:</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">d</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>burg2 <span class="op">=</span> <span class="fu">str_detect</span><span class="op">(</span><span class="va">top_ct_desc</span>, <span class="st">"BURG"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu">str_detect</span><span class="op">(</span><span class="va">top_ct_desc</span>, <span class="st">"SECOND|2ND"</span><span class="op">)</span><span class="op">)</span>

<span class="va">counts</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">burg2</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">count</span><span class="op">(</span><span class="va">top_ct_desc</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">counts</span><span class="op">$</span><span class="va">n</span><span class="op">)</span>
<span class="co">#&gt; [1] 2302</span></pre></div>
<p>Shortening “BURGLARY” to “BURG” found us 5 more cases. That’s not a lot, but it’s good to keep in mind that bits of words can find charges that whole words will not.</p>
</div>
</div>
<div id="identifying-charges-by-exclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#identifying-charges-by-exclusion" class="anchor"></a>Identifying charges by exclusion</h2>
<p>In some cases, it’s not entirely feasible to anticipate all the possible ways an offense might be recorded. In particular, cases involving drugs may refer to the substances in general as “DRUGS”, “CDS”, “CONTROLLED SUBSTANCE”, or specifically as “METH”, “METHAMPHETAMINE”, “MARIJUANA”, “MARI”, etc. Sometimes it’s more effective to exclude charges that contain certain words rather than trying to identify all of the possible ways something might appear.</p>
<p>If we want to identify possession of a controlled substance with intent to distribute (PWID), we can start by looking for “INTENT” or “DISTR”:</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">d</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>pwid <span class="op">=</span> <span class="fu">str_detect</span><span class="op">(</span><span class="va">top_ct_desc</span>,<span class="st">"INTENT|DISTR"</span><span class="op">)</span><span class="op">)</span>

<span class="va">counts</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">pwid</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">count</span><span class="op">(</span><span class="va">top_ct_desc</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></pre></div>
<p>This simple search is effective; 19 of the top 20 on the list are what we’re looking for. There are also some charges like “Shooting with intent to kill” and “Entering with intent to steal copper” that we want to exclude. Taking stock of those, we can add words to exclude, run it again, find new offenses we didn’t catch, and repeat the process. We might gradually expand it to something like this:</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="va">d</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>pwid <span class="op">=</span> <span class="fu">str_detect</span><span class="op">(</span><span class="va">top_ct_desc</span>,<span class="st">"INTENT|DISTR"</span><span class="op">)</span> <span class="op">&amp;</span> 
                                   <span class="op">!</span><span class="fu">str_detect</span><span class="op">(</span><span class="va">top_ct_desc</span>, <span class="st">"MISDEMEANOR|HUMAN|VEHICLE|FIREARM|CULTIVATION|MURDER|PORN|STEAL|SHOOT|ASSAULT|BREAK|KILL|BATT"</span><span class="op">)</span><span class="op">)</span>

<span class="va">counts</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">pwid</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">count</span><span class="op">(</span><span class="va">top_ct_desc</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></pre></div>
<p>This is an inexact process for now, and we need to be transparent about what we’re doing. Since our database isn’t open to the public, we’ll include a csv file on the GitHub repository with a list of all of the raw charges and their frequency for each analysis that uses this classification method. To do that, just write the <code>counts</code> dataframe produced above to a csv:</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="fu">write_csv</span><span class="op">(</span><span class="va">count</span>, <span class="st">"PWID charge descriptions.csv"</span><span class="op">)</span></pre></div>
<p>There is</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Ryan Gentzler.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
